<!DOCTYPE html>
<html>
<head>
    <title>Affichage de vidéo avec Flask</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Ajoutez le lien vers le fichier CSS -->
    <link rel="stylesheet" href="static/css/main.css">
</head>
<body>
    <div class="navbar">
        <ul>
            <li><a href="#">Vidéos</a></li>
            <li><a href="#">Statistique</a></li>
        </ul>
    </div>
    <div id="camera">
        <div>
            <label for="camera-select">Sélectionnez une caméra:</label>
            <select id="camera-select">
                <option value="C1">Caméra 1</option>
                <option value="C2">Caméra 2</option>
                <option value="C3">Caméra 3</option>
                <option value="C4">Caméra 4</option>
                <option value="C5">Caméra 5</option>
            </select>
        </div>

    </div>
    <div class="controls">
        <button onclick="seekToTime(0)">0s</button>
        <button onclick="seekToTime(10)">10s</button>
        <button onclick="seekToTime(30)">30s</button>
        <button onclick="seekToTime(60)">1min</button>
        <button onclick="seekToTime(120)">2min</button>
        <button onclick="seekToTime(360)">6min</button>
        <button onclick="seekToTime(1800)">30min</button>
    </div>
    <div id="player" style="width: 600px; height: 337px;"></div>
    <script src="https://unpkg.com/artplayer/dist/artplayer.js"></script>
    <script>
        const art = new Artplayer({
            container: '#player',
            url: '/video?camera=C1&heure=12&jours=16&mois=04&annee=24',
            isLive: false,
            muted: false,
            autoplay: false,
            pip: true,
            autoSize: true,
            autoMini: true,
            screenshot: true,
            setting: true,
            loop: true,
            flip: true,
            playbackRate: true,
            aspectRatio: true,
            fullscreen: true,
            fullscreenWeb: true,
            subtitleOffset: true,
            miniProgressBar: true,
            mutex: true,
            backdrop: true,
            playsInline: true,
            autoPlayback: true,
            airplay: true,
        });

        // Init
        const cameraSelect = document.getElementById('camera-select');

        // Fonction
        // Permet de se déplacer dans la vidéo
        const seekToTime = (time) => {
            art.seek = time;
        }
        // Permet de changer de caméra
        function changeCamera() {
            var camera = cameraSelect.value;
            art.url = `/video?camera=${camera}&heure=12&jours=16&mois=04&annee=24`;
            // attend que la video soit chargée
            art.on('loadedmetadata', () => {
                art.play();
                seekToTime(0);
            });
        }


        // Event
        cameraSelect.addEventListener('change', changeCamera);
    </script>
</body>
</html>

